<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Control Intro variables.
globalvar sonido_h;
sonido_h = false;

spd = 0;
animar = true;
inicio = true;
seguir_ninos = false;
inc = 0.02;
audio_play_sound(sn_wind1, 1, 1);

// Control variables.
if(audio_is_playing(sn_avion)){
    audio_sound_gain(sn_avion, 1, 1);
}
create_textbox = false;

var h = instance_create(
    -10, 
    62, 
    Helicopter_Intro
);

//with(h){ hspeed = 4; }
caos = false;
buildings = false;
collapses = false;
sentido = "derecha";

texto_avion = "Colombia, finales de los años 80.         Basado en hechos reales.";
texto_1 = "";

mostrar_historia = true;
alarm[8] = 35;
cantidad_letras = 0;
audio_play_sound(sn_musica_intro, 1, 1);
audio_sound_gain(sn_musica_intro, 1, 3000);

//audio_play_sound(sn_soundtrack_1, 1, 1);
//audio_sound_gain(sn_soundtrack_1, 0, 1);



/*
HACER CAER LAS BOMBAS MAS RÁPIDO.

*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Texto. Basado en hechos reales.
cantidad_letras++;
texto_1 = string_copy(texto_avion, 0, cantidad_letras);
alarm[8] = 1.7;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Move player.
with Player_Intro {
    sprite_index = spr_player_ground_angry_walk;
    hspeed = -4;
    image_speed = .2;
    alarm[0] = 1;
}

with(Child_Intro){
    switch(sprite_index){
        case spr_child1_idle_2:
            sprite_index = spr_child1_run_2;
        break;
        case spr_child2_idle_2:
            sprite_index = spr_child2_run_2;
        break;
        case spr_child3_idle_2:
            sprite_index = spr_child3_run_2;
        break;
    }
    hspeed = -5;
    x += 15;
    image_speed = .2;
    image_xscale = -1;
}
                    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create explosions!!!
repeat(3){
    instance_create(irandom_range(100, 600), irandom_range(100,400), Destrucion);
}
//Player.controles = "intro";
alarm[6] = 20;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Room goto Room_Select
ini_open(working_directory + "historia.sav");
ini_write_real("historia", "pass", 1);
ini_close();     
room_goto_transition(Room_Select, 0, 120);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create helicopters.
if(sentido == "derecha"){
    instance_create(-30, irandom_range(40, 180), Helicopter_Intro);
}else{
    instance_create(768+30, irandom_range(40, 180), Helicopter_Intro);
}
alarm[4] = 50;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Crear explosiones.
repeat(2){
    instance_create(
        768, 
        irandom_range(sprite_get_height(spr_destruction), room_height - sprite_get_height(spr_destruction)), 
        Destrucion
    );
}
var s = instance_create(0, 0, Screen_Shake);
with(s){ alarm[0] = 15; }
var rand = irandom_range(1, 3);
if(rand == 1){
    if(audio_is_playing(sn_roar)) audio_stop_sound(sn_roar);
    audio_play_sound(sn_roar, 0, 0);
}
alarm[3] = irandom_range(30, 45);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Crear tanques.
if(sentido == "derecha"){
    var t = instance_create(-150, 445, Tank2);
}else{
    var t = instance_create(768 + 150, 445, Tank2);
}   
with(t) depth = -500;
alarm[2] = 200;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Crear soldados.
if(sentido == "derecha"){
    var sp = instance_create(-50, 405, Soldado_Piso);
}else{
    var sp = instance_create(room_width + 50, 405, Soldado_Piso);
}

//with sp depth = -y;
alarm[1] = 70;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Crear personas.
var rand = irandom_range(1, 3)
var yy = irandom_range(433-3, 433 + 3);
for(var i = 0; i &lt; rand; i++){
    var ch = instance_create(
        768 +10 + (i*20), 
        yy, 
        Child_Run
    );
    
    with(ch){
        depth = -y;
        hspeed = -3;
        image_xscale = -1;
        if(sprite_index == spr_child1_run){
            y -= 6;
        }
    }
}
alarm[0] = 70;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Movimiento de camara.


// Inicio de la animación.
if(inicio){
    if(view_xview[0] &lt; 768){
        if(view_xview[0] &lt; 768/2){
            view_xview[0] += spd;
            spd += inc;
        }else if(view_xview[0] &gt; 768/2){
            view_xview[0] += spd;
            spd -= inc;
        }
    }
    
    if(view_xview[0] &gt; 768){
        view_xview[0] = 768;
        inicio = false;
    }
}

if(seguir_ninos){
    if(view_xview[0] &gt; 0){
        var near_c = instance_nearest(0,0, Child_Intro);
        view_xview[0] = near_c.x - 431
    }else{
        view_xview[0] = 0;
        seguir_ninos = false;
    }
}


if(caos){
    caos = false;
    alarm[0] = 1; // Crear Personas.
    alarm[1] = 1; // Crear soldados.
    alarm[2] = 30; // Crear tanques.
    alarm[3] = 1; // Crear explosiones.
}

if(buildings){
    var edificios = instance_nearest_list(0,0,Edificio);
    for(var i = 0; i &lt; ds_list_size(edificios); i++){
        var e = ds_list_find_value(edificios, i);
        
        with(e){  y += .5; }
        if(!collapses) instance_create(e.x + sprite_width/2, e.y - sprite_get_height(spr_collapse)/2, Collapse);
  
    }
    if(!collapses){ instance_create(0,0, Screen_Shake); }
    collapses = true;

}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Parar todos los sonidos.
audio_stop_sound(sn_musica_intro);
audio_stop_sound(sn_soundtrack_1);
audio_stop_sound(sn_soundtrack_pausa);
audio_stop_sound(sn_edificio_collapse);
if(instance_exists(Screen_Shake)) with Screen_Shake instance_destroy();

// Save story.
ini_open(working_directory + "historia.sav");
ini_write_real("historia", "pass", 1);
ini_close();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>Control_Intro</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite(
    spr_piso, 
    0,
    0, 
    433
   // room_height - sprite_get_height(spr_piso)
);

draw_sprite(
    spr_piso, 
    0,
    768, 
    433
   // room_height - sprite_get_height(spr_piso)
);

if(mostrar_historia){
    draw_set_font(font_textbox);
    draw_set_color(c_white);
    draw_text(170, 58, texto_1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_restart();

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
